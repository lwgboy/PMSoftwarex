<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<meta charset="ISO-8859-1"></meta>
<title>Insert title here</title>
</head>
<body>
	<section th:fragment="file_input">
		<!-- canvas-to-blob.min.js is only needed if you wish to resize images before upload.
     This must be loaded before fileinput.min.js -->
		<script
			th:src="@{/bootstrap-fileinput/js/plugins/canvas-to-blob.min.js}"
			src="../bootstrap-fileinput/js/plugins/canvas-to-blob.min.js"
			type="text/javascript"></script>
		<!-- sortable.min.js is only needed if you wish to sort / rearrange files in initial preview.
     This must be loaded before fileinput.min.js -->
		<script th:src="@{/bootstrap-fileinput/js/plugins/sortable.min.js}"
			src="../bootstrap-fileinput/js/plugins/sortable.min.js"
			type="text/javascript"></script>
		<!-- purify.min.js is only needed if you wish to purify HTML content in your preview for HTML files.
     This must be loaded before fileinput.min.js -->
		<script th:src="@{/bootstrap-fileinput/js/plugins/purify.min.js}"
			src="../bootstrap-fileinput/js/plugins/purify.min.js"
			type="text/javascript"></script>
		<!-- the main fileinput plugin file -->
		<script th:src="@{/bootstrap-fileinput/js/fileinput.min.js}"
			src="../bootstrap-fileinput/js/fileinput.min.js"></script>
		<!-- bootstrap.js below is needed if you wish to zoom and view file content 
     in a larger detailed modal dialog -->

		<!-- optionally if you need a theme like font awesome theme you can include 
    it as mentioned below -->
		<script th:src="@{/bootstrap-fileinput/themes/fa/theme.js}"
			src="../bootstrap-fileinput/themes/fa/theme.js"></script>
		<!-- optionally if you need translation for your language then include 
    locale file as mentioned below -->
		<script th:src="@{/bootstrap-fileinput/js/locales/LANG.js}"
			src="../bootstrap-fileinput/js/locales/LANG.js"></script>
	</section>

	<script th:fragment="footer_script">
		jQuery(document).ready(function() {

			var cTable = $('#dataTables-example').dataTable();
			populate_basic_table("/product/list", cTable, "product");
			var files = new Array();
			var sid = (id || 0);
			$.ajax({
				url : "/product/images/" + sid,
				dataType : 'json',
				success : function(s) {
					var loc = window.location.origin;
					$.each(s, function(i, x) {
						files.push(loc + x.image);
					});

					$("#input-pd").fileinput({
						uploadUrl : "/product/delete",
						uploadAsync : false,
						/* minFileCount: 2,
						maxFileCount: 5, */
						overwriteInitial : false,
						initialPreview : files,
						/* initialPreview: [
						    // IMAGE DATA
						    "http://localhost:8080/product_images/10/10_5Koala.jpg",
						    // IMAGE DATA
						    "http://kartik-v.github.io/bootstrap-fileinput-samples/samples/Lighthouse.jpg",
						    // VIDEO DATA
						    "http://kartik-v.github.io/bootstrap-fileinput-samples/samples/small.mp4",
						    // PDF DATA
						    'http://kartik-v.github.io/bootstrap-fileinput-samples/samples/pdf-sample.pdf',
						    // TEXT DATA
						    "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ut mauris ut libero fermentum feugiat eu et dui. Mauris condimentum rhoncus enim, sed semper neque vestibulum id. Nulla semper, turpis ut consequat imperdiet, enim turpis aliquet orci, eget venenatis elit sapien non ante. Aliquam neque ipsum, rhoncus id ipsum et, volutpat tincidunt augue. Maecenas dolor libero, gravida nec est at, commodo tempor massa. Sed id feugiat massa. Pellentesque at est eu ante aliquam viverra ac sed est.",
						    // HTML DATA
						    '<div class="text-center">' + 
						    '<h3>Lorem Ipsum</h3>' + 
						    '<p><em>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."</em></p>' + 
						    '<h5><small>"There is no one who loves pain itself, who seeks after it and wants to have it, simply because it is pain..."</small></h5>' + 
						    '<hr/>' + 
						    '</div>' + 
						    '<div class="text-justify">' + 
						    '<p>' + 
						    'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed convallis convallis dolor sed dignissim. Phasellus euismod mauris vel dolor maximus, sed fermentum mauris lobortis. Aliquam luctus, diam in luctus egestas, magna lacus luctus libero, scelerisque mattis ante dolor ac nunc. Interdum et malesuada fames ac ante ipsum primis in faucibus. Suspendisse varius orci ultricies massa euismod, at semper turpis fermentum. Quisque vitae augue vel lectus viverra facilisis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nulla lacinia molestie diam, et volutpat nunc bibendum a. Cras a est sed augue commodo accumsan quis vitae nisi.' + 
						    '</p>' + 
						    '<p>' + 
						    'Nunc sit amet metus et dui aliquet feugiat. Praesent lobortis, ipsum et elementum dignissim, urna libero fringilla justo, at tincidunt nisi mi sed mi. Integer vel est porttitor, tempor tortor non, lobortis felis. Curabitur porttitor nisi et volutpat iaculis. Fusce nec feugiat lectus, vitae ullamcorper lorem. Ut ultrices nunc imperdiet placerat malesuada. Proin commodo erat in egestas maximus.' + 
						    '</p></div>'
						] */
						initialPreviewAsData : true, // identify if you are sending preview data only and not the raw markup
						initialPreviewFileType : 'image', // image is the default and can be overridden in config below
						/* initialPreviewConfig: [
						    {caption: "Desert.jpg", size: 827000, width: "120px", url: "/file-upload-batch/2", key: 1},
						    {caption: "Lighthouse.jpg", size: 549000, width: "120px", url: "/file-upload-batch/2", key: 2}, 
						    {type: "video", size: 375000, filetype: "video/mp4", caption: "KrajeeSample.mp4", url: "/file-upload-batch/2", key: 3}, 
						    {type: "pdf", size: 8000, caption: "About.pdf", url: "/file-upload-batch/2", key: 4},
						    {type: "text", size: 1430, caption: "LoremIpsum.txt", url: "/file-upload-batch/2", key: 5}, 
						    {type: "html", size: 35500000000, caption: "LoremIpsum.html", url: "/file-upload-batch/2", key: 6}
						], */
						purifyHtml : true, // this by default purifies HTML data for preview
					/* uploadExtraData: {
					    img_key: "1000",
					    img_keywords: "happy, places",
					} */
					}).on('filesorted', function(e, params) {
						console.log('File sorted params', params);
					}).on('fileuploaded', function(e, params) {
						console.log('File uploaded params', params);
					});
				}
			});

		});
	</script>

	<div class="col-lg-9" th:fragment="preProduct(update,button)">
		<div class="panel panel-default">
			<div class="panel-heading">Design Categories</div>
			<!-- /.panel-heading -->
			<div class="panel-body">
				<!-- Nav tabs -->
				<div class="col-lg-7">
					<ul class="nav nav-tabs">
						<li class="active"><a href="#category" data-toggle="tab"
							aria-expanded="true">Primary Category</a></li>
						<li class=""><a href="#division" data-toggle="tab"
							aria-expanded="false">Primary Division</a></li>
						<li class=""><a href="#section" data-toggle="tab"
							aria-expanded="false">Primary Section</a></li>
						<li class=""><a href="#style" data-toggle="tab"
							aria-expanded="false">Style</a></li>
						<li class=""><a href="#brand" data-toggle="tab"
							aria-expanded="false">Brand</a></li>
					</ul>

					<!-- Tab panes -->
					<div class="tab-content">
						<div class="tab-pane fade active in" id="category">
							<input class="category form-control" th:field="*{category.name}"
								type="text" autocomplete="off" /> <input class="form-control"
								th:field="*{category.id}" type="hidden" />
						</div>
						<div class="tab-pane fade" id="division">
							<input class="division form-control" th:field="*{division.name}"
								type="text" autocomplete="off" /> <input class="form-control"
								th:field="*{division.id}" type="hidden" />
						</div>
						<div class="tab-pane fade" id="section">
							<div id="scrollable-dropdown-menu">
								<input class="section form-control" th:field="*{section.name}"
									type="text" autocomplete="off" /> <input class="form-control"
									th:field="*{section.id}" type="hidden" />
							</div>
						</div>
						<div class="tab-pane fade" id="style">
							<input class="style form-control" th:field="*{style.name}"
								type="text" autocomplete="off" /> <input class="form-control"
								th:field="*{style.id}" type="hidden" />
						</div>
						<div class="tab-pane fade" id="brand">
							<input class="designBrand form-control" th:field="*{brand.name}"
								type="text" autocomplete="off" /> <input class="form-control"
								th:field="*{brand.id}" type="hidden" />
						</div>
					</div>
				</div>
				<div class="col-lg-2">
					<div class="form-group" th:if='${update}'>
						<a th:href="|/product/clone/${id}|">
							<button type="button" class="btn btn-outline btn-info clone">
								<i class="fa fa-clone" aria-hidden="true"></i> Clone
							</button>
						</a>
					</div>
				</div>
			</div>
			<!-- /.panel-body -->
		</div>
		<!-- /.panel -->
	</div>
	<div class="taglist form-group" th:fragment="tags">
		<div class="alert alert-info alert-dismissable"
			th:each="var, tagStat : *{tags}">
			<span th:if="${var.type}"> <label th:text="${var.type.name}"
				class="alert-label"></label> <input class="form-control"
				th:field="*{tags[__${tagStat.index}__].type.id}" type="hidden" /> <input
				class="form-control"
				th:field="*{tags[__${tagStat.index}__].type.name}" type="hidden" />
				<button type="button" class="close" data-dismiss="alert"
					aria-hidden="true">x</button>
			</span>
		</div>
	</div>
	<div class="variantlist form-group" th:fragment="variants">
		<div class="alert alert-info alert-dismissable"
			th:each="var, variantStat : *{variants}">
			<span th:if="${var.type[0]}"><label th:text="${var.type[0].name}" class="alert-label"></label> <input
				class="form-control"
				th:field="*{variants[__${variantStat.index}__].type[0].id}"
				type="hidden" /> <input class="form-control"
				th:field="*{variants[__${variantStat.index}__].type[0].name}"
				type="hidden" />
			<button type="button" class="close" data-dismiss="alert"
				aria-hidden="true">x</button>
				</span>
		</div>
	</div>
	<div class="form-group" th:fragment="variants_pi">
		<div class="alert alert-info alert-dismissable"
			th:each="var, variantTypeStat : *{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].variant.type}">
			<span th:if="${var}"><label th:text="${var.name}" class="alert-label"></label> <input
				class="form-control"
				th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].variant.type[__${variantTypeStat.index}__].id}"
				type="hidden" /> <input class="form-control"
				th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].variant.type[__${variantTypeStat.index}__].name}"
				type="hidden" />
			<button type="button" class="close" data-dismiss="alert"
				aria-hidden="true">x</button>
				</span>
		</div>
	</div>
	
	<div class="form-group" th:fragment="productvariants">
		<div class="alert alert-info alert-dismissable"
			th:each="tar, typeStat : *{variants[__${variantStat.index}__].type}">
			<span th:if="${tar}"><label th:text="${tar.name}" class="alert-label"></label> <input
				class="form-control"
				th:field="*{variants[__${variantStat.index}__].type[__${typeStat.index}__].id}"
				type="hidden" /> <input class="form-control"
				th:field="*{variants[__${variantStat.index}__].type[__${typeStat.index}__].name}"
				type="hidden" />
			<button type="button" class="close" data-dismiss="alert"
				aria-hidden="true">x</button>
				</span>
		</div>
	</div>
	
	
	<div class="vendorlist form-group" th:fragment="vendors">
		<div class="alert alert-info alert-dismissable"
			th:each="var, vendorStat : *{vendors}">
			<span th:if="${var}"> <label th:text="${var.name}"
				class="alert-label"></label> <input class="form-control"
				th:field="*{vendors[__${vendorStat.index}__].id}" type="hidden" />
				<input class="form-control"
				th:field="*{vendors[__${vendorStat.index}__].name}" type="hidden" />
				<button type="button" class="close" data-dismiss="alert"
					aria-hidden="true">x</button>
			</span>
		</div>
	</div>

	<div th:fragment="brand(update,button)">
		<div class="row">
			<div class="col-lg-6">
				<div class="form-group">
					<label>Brand Name *</label> <input type="text" th:field="*{name}"
						class="form-control" /><input type="hidden" th:field="*{id}"
						class="form-control" />
				</div>
				<div class="form-group">
					<label>Description</label>
					<textarea class="form-control" rows="3" th:field="*{description}"></textarea>
				</div>
				<div class="form-group">
					<label>Primary Unit of Measurement</label>
					<div id="scrollable-dropdown-menu">
						<input class="measurement form-control"
							th:field="*{primaryUnit.name}" type="text" autocomplete="off" />
						<input class="form-control" th:field="*{primaryUnit.id}"
							type="hidden" />
					</div>
				</div>
				<div class="form-group">
					<label>Secondary Unit of Measurement</label>
					<div id="scrollable-dropdown-menu">
						<input class="measurement form-control"
							th:field="*{secondaryUnit.name}" type="text" autocomplete="off" />
						<input class="form-control" th:field="*{secondaryUnit.id}"
							type="hidden" />
					</div>
				</div>
			</div>
			<div class="col-lg-6">
				<div class="form-group" th:if='${update}'>
					<a th:href="|/brand/clone/${id}|">
						<button type="button" class="btn btn-outline btn-info clone">
							<i class="fa fa-clone" aria-hidden="true"></i> Clone
						</button>
					</a>
				</div>

				<div class="form-group" id="scrollable-dropdown-menu">
					<label>Tags</label> <input class="tagType form-control" type="text"
						autocomplete="off" />
					<button type="submit" style="display: none" name="addTag"
						id="addTag" class="btn btn-info btn-xs"></button>


				</div>
				<div class="taglist" th:include="fragments::tags"></div>

				<div class="form-group" id="scrollable-dropdown-menu">
					<label>Variants</label> <input
						class="variantType_brand form-control" type="text"
						autocomplete="off" />
					<button type="submit" style="display: none" name="addVariant"
						id="addVariant" class="btn btn-info btn-xs"></button>
				</div>
				<div class="variantlist" th:include="fragments::variants"></div>

			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<div th:if="${#fields.hasAnyErrors()}" class="alert alert-danger">
					<p th:text="${#fields.allErrors()[0]}">...</p>
				</div>
				<div class="form-group">
					<button type="submit" class="btn btn-primary" th:switch="${button}">
						<i th:case="Add" class="fa fa-plus fa-lg" aria-hidden="true"></i>
						<i th:case="Update" class="fa fa-floppy-o fa-lg"
							aria-hidden="true"></i> <span th:text="${button}"></span>
					</button>
					<a href="/brand/">
						<button type="button" class="btn btn-danger" th:if='${update}'>
							<i class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
							Cancel
						</button>
					</a>
				</div>
			</div>
		</div>
	</div>

	<div th:fragment="product(update,button)">
		<div class="row">
			<div class="col-lg-6">
				<div class="form-group">
					<label>Design Name *</label> <input type="text" th:field="*{name}"
						class="form-control" /><input type="hidden" th:field="*{id}"
						class="form-control" />
				</div>
				<div class="form-group">
					<label>Description</label>
					<textarea class="form-control" rows="3" th:field="*{description}"></textarea>
				</div>
				<div class="form-group">
					<label><input type="checkbox" th:field="*{trackInventory}" />
						Track Inventory</label>
				</div>
				<div class="form-group">
					<label><input type="checkbox" th:field="*{active}" />
						Active</label>
				</div>
				<div class="form-group">
					<label><input type="checkbox" th:field="*{taxable}" />
						Taxable</label>
				</div>
			</div>
			<div class="col-lg-6">
				<div class="form-group">
					<label>Product Type *</label>
					<div id="scrollable-dropdown-menu">
						<input type="text" th:field="*{productType.name}"
							class=" productType form-control" autocomplete="off" /><input
							type="hidden" th:field="*{productType.id}" class="form-control" />
					</div>
				</div>
				<div class="form-group">
					<label>Indicatory Cost</label> <input type="text"
						th:field="*{indicatoryCost}" class="form-control" />
				</div>
				<div class="form-group" id="scrollable-dropdown-menu">
					<label>Tags</label> <input class="tagType form-control" type="text"
						autocomplete="off" />
					<button type="submit" style="display: none" name="addTag"
						id="addTag" class="btn btn-info btn-xs"></button>
				</div>
				<div class="taglist" th:include="fragments::tags"></div>

				<div class="form-group" id="scrollable-dropdown-menu">
					<label>Vendors</label> <input class="product_vendor form-control"
						type="text" autocomplete="off" />
					<button type="submit" style="display: none" name="addVendor"
						id="addVendor" class="btn btn-info btn-xs"></button>
				</div>
				<div class="vendorlist" th:include="fragments::vendors"></div>
			</div>
			<div class="col-sm-12">
				<div class="form-group">
					<input id="input-pd" name="imageFiles" type="file"
						multiple="multiple" class="file-loading" />

					<div th:each="var, imageStat : *{images}">
						<input th:field="*{images[__${imageStat.index}__].image}"
							type="hidden" />
					</div>

				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<div class="panel panel-info">
					<div class="panel-heading">
						<label>Variants</label>
					</div>
					<div class="panel-body">
						<table class="table table-striped table-bordered table-hover">
							<tbody th:each="var, variantStat : *{variants}">
								<tr>
									<td rowspan="2">
										<button type="submit" name="removeVariant"
											class="btn btn-danger btn-circle-sm btn-xs"
											th:value="(*{variants[__${variantStat.index}__].srNo!=0} ?*{variants[__${variantStat.index}__].srNo}: ${variantStat.count} )">
											<i class="fa fa-times fa-fw"></i>
										</button>
									</td>
									<td rowspan="3">
										Variant Type
										<div class="form-group" id="scrollable-dropdown-menu">
											 <input
												class="variantType_product form-control" type="text"
												autocomplete="off" th:id="${variantStat.count}" />
											<button type="submit" style="display: none" name="addVariant"
												id="addVariant" class="btn btn-info btn-xs"></button>
										</div>
										<div class="productvariantlist"
											th:include="fragments::productvariants" th:id="|vplist${variantStat.count}|"></div>
									</td>
									<th>Variant</th>
									<td><input type="hidden"
										th:field="*{variants[__${variantStat.index}__].id}"
										class="form-control" /> <input type="hidden"
										th:field="*{variants[__${variantStat.index}__].sku}"
										class="form-control" /> <input type="text"
										th:field="*{variants[__${variantStat.index}__].name}"
										class="form-control" /> <input type="hidden"
										th:attr="name='variants[' + ${variantStat.index} + '].srNo'"
										class="form-control"
										th:value="(*{variants[__${variantStat.index}__].srNo!=0} ?*{variants[__${variantStat.index}__].srNo}: ${variantStat.count} )" /></td>
									<th class="tb-width-sm">Quantity</th>
									<td><input type="text"
										th:field="*{variants[__${variantStat.index}__].quantity}"
										class="form-control" /></td>
									</tr>
									<tr>
									<th class="tb-width-sm">WSP Margin</th>
									<td><input type="text"
										th:field="*{variants[__${variantStat.index}__].wspMargin}"
										class="form-control" /></td>
									<th class="tb-width-md">WSP Price</th>
									<td><input type="text"
										th:field="*{variants[__${variantStat.index}__].wspPrice}"
										class="form-control" /></td>
									</tr><tr>
									<td>
									<p><a href="/product/addRoute"
										th:id="|variantRoute${variantStat.count}|"
										class="variantRoute"><i class="fa fa-plus fa-lg"
											aria-hidden="true">Route</i></a></p>
									</td>
									<th class="tb-width-sm">RSP Margin</th>
									<td><input type="text"
										th:field="*{variants[__${variantStat.index}__].rspMargin}"
										class="form-control" /></td>
									<th class="tb-width-md">RSP Price</th>	
									<td><input type="text"
										th:field="*{variants[__${variantStat.index}__].rspPrice}"
										class="form-control" /></td>
								</tr>
								<tr th:if="*{variants[__${variantStat.index}__].variantRoutes}"
									th:id="|variantRouteRow${variantStat.count}|"
									class="variantRouteRow">
									<td colspan="9">
										<table class="table table-striped table-bordered table-hover">
											<thead>
												<tr>
													<th>Route</th>
													<th>Stage</th>
													<th>Quantity</th>
												</tr>
											</thead>
											<tbody>
												<tr
													th:each="var, routeStat : *{variants[__${variantStat.index}__].variantRoutes}">
													<td>
														<div id="scrollable-dropdown-menu">
															<input
																th:field="*{variants[__${variantStat.index}__].variantRoutes[__${routeStat.index}__].route.name}"
																type="text"
																class="route typeahead tt-query form-control"
																autocomplete="off" /> <input
																th:field="*{variants[__${variantStat.index}__].variantRoutes[__${routeStat.index}__].route.id}"
																type="hidden" class="form-control" />
														</div>
													</td>
													<td>
														<div id="scrollable-dropdown-menu">
															<input
																th:field="*{variants[__${variantStat.index}__].variantRoutes[__${routeStat.index}__].currentStage.type.name}"
																type="text"
																class="stageType typeahead tt-query form-control"
																autocomplete="off" /> <input
																th:field="*{variants[__${variantStat.index}__].variantRoutes[__${routeStat.index}__].currentStage.type.id}"
																type="hidden" class="form-control" />
														</div>
													</td>
													<td><input
														th:field="*{variants[__${variantStat.index}__].variantRoutes[__${routeStat.index}__].count}"
														type="text" class="stage typeahead tt-query form-control"
														autocomplete="off" /></td>
												</tr>
											</tbody>
										</table>
									</td>
								</tr>
							</tbody>
						</table>
						<div class="form-group">
							<button type="submit" name="addVariant"
								class="btn btn-info btn-xs">
								<i class="fa fa-plus fa-lg" aria-hidden="true"></i> Add Variant
							</button>
						</div>
					</div>
				</div>
				<div th:if="${#fields.hasAnyErrors()}" class="alert alert-danger">
					<p th:text="${#fields.allErrors()[0]}">...</p>
				</div>
				<script th:inline="javascript">
					/*<![CDATA[*/

					var id = /*[[${product.id}]]*/'0';

					/*]]>*/
				</script>
				<div class="form-group">
					<button type="submit" name="save" class="btn btn-primary"
						th:switch="${button}">
						<i th:case="Add" class="fa fa-plus fa-lg" aria-hidden="true"></i>
						<i th:case="Update" class="fa fa-floppy-o fa-lg"
							aria-hidden="true"></i> <span th:text="${button}"></span>
					</button>
					<a href="/product/">
						<button type="button" class="btn btn-danger" th:if='${update}'>
							<i class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
							Cancel
						</button>
					</a>
				</div>
			</div>
		</div>
	</div>

	<div th:fragment="purchaseOrder(update,button)">
		<div class="row">
			<div class="col-lg-6">
				<div class="form-group">
					<input class="form-control" th:field="*{finYear}" type="hidden" />
					<input class="form-control" th:field="*{purchaseOrderId}"
						type="hidden" /> <label th:text="Vendor"></label>
					<!-- <button type="submit" name="removeTag" class="btn btn-danger btn-circle-sm btn-xs"><i class="fa fa-times fa-fw"></i>
                            </button> -->
					<div id="scrollable-dropdown-menu">
						<input class="vendor form-control" th:field="*{vendor.name}"
							type="text" autocomplete="off" /> <input class="form-control"
							th:field="*{vendor.id}" type="hidden" />
					</div>

				</div>
				<div id="scrollable-dropdown-menu" class="form-group">
					<label>Transport Carrier</label> <input
						class="transportCarrier form-control"
						th:field="*{transportCarrier.name}" type="text" autocomplete="off" />
					<input class="form-control" th:field="*{transportCarrier.id}"
						type="hidden" />
				</div>
				<div class="form-group">
					<label>Transport Booking Location</label> <input type="text"
						th:field="*{transportBookingLocation.name}"
						class="warehouse form-control" autocomplete="off" /> <input
						type="hidden" th:field="*{transportBookingLocation.id}"
						class="form-control" />
				</div>
				<div class="form-group">
					<label>PO Date</label> <input type="date"
						data-th-field="*{purchaseOrderDate}" class="form-control" />
				</div>
			</div>
			<div class="col-lg-6">
				<div class="form-group">
					<label>Agency</label> <input type="text" th:field="*{agency}"
						class="form-control" />
				</div>
				<div class="form-group">
					<label>Delivery Date</label> <input type="date"
						data-th-field="*{deliveryDate}" class="form-control" />
				</div>
				<div class="form-group">
					<label>Quantity Tolerance</label> <input type="text"
						th:field="*{quantityTolerance}" class="form-control" />
				</div>
				<div class="form-group">
					<label>Delivery Date Tolerance</label> <input type="text"
						th:field="*{dateTolerance}" class="form-control" />
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<div class="panel panel-info">
					<div class="panel-heading">
						<label>Items</label>
					</div>
					<div class="panel-body">
						<table class="table table-striped table-bordered table-hover">
							<tbody
								th:each="var, purchaseOrderItemStat : *{purchaseOrderItems}">
								<tr>
									<th colspan="5" th:text="|Item ${purchaseOrderItemStat.count}|">
									</th>

								</tr>
								<tr th:if="${var.product == null}">
									<td>
										<button type="submit" name="addProduct"
											class="btn btn-info btn-xs"
											th:value="(*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].srNo!=0} ?*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].srNo}: ${purchaseOrderItemStat.count} )">
											<i class="fa fa-arrows-alt" aria-hidden="true"></i> Known
											Design
										</button>
									</td>
									<th>Style</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input type="text"
												th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].style.name}"
												class="style form-control" autocomplete="off" /> <input
												type="hidden"
												th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].style.id}"
												class="form-control" />
										</div>
									</td>
									<th>Brand</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input type="text"
												th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].brand.name}"
												class="brand form-control" autocomplete="off" /> <input
												type="hidden"
												th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].brand.id}"
												class="form-control" />
										</div>
									</td>
								</tr>
								<tr th:if="${var.product}">
									<td>
										<button type="submit" name="removeProduct"
											class="btn btn-info btn-xs"
											th:value="(*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].srNo!=0} ?*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].srNo}: ${purchaseOrderItemStat.count} )">
											<i class="fa fa-arrows-alt" aria-hidden="true"></i> unknown
											Design
										</button>
									</td>
									<th>Design</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input type="text"
												th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].product.name}"
												class="product form-control" autocomplete="off" /> <input
												type="hidden"
												th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].product.id}"
												class="form-control" />
										</div>
									</td>
									<th>Variant</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input type="text"
												th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].variant.name}"
												class="product_variant form-control" autocomplete="off" />
											<input type="hidden"
												th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].variant.id}"
												class="form-control" />
										</div>
									</td>
								</tr>
								<tr>
									<td rowspan="2">
										<button type="submit" name="removePurchaseOrderItem"
											class="btn btn-danger btn-xs"
											th:value="(*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].srNo!=0} ?*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].srNo}: ${purchaseOrderItemStat.count} )">
											<i class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
											Delete

										</button> <input type="hidden"
										th:attr="name='purchaseOrderItems[' + ${purchaseOrderItemStat.index} + '].srNo'"
										class="form-control"
										th:value="(*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].srNo!=0} ?*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].srNo}: ${purchaseOrderItemStat.count} )" />
										<input
										th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].finYear}"
										type="hidden" class="form-control" /> <input
										th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].purchaseOrderId}"
										type="hidden" class="form-control" />
									</td>
									<th>Date</th>
									<td><input type="date"
										th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].deliveryDate}"
										class="form-control" autocomplete="off" /></td>

									<th>Quantity</th>
									<td><input type="text"
										th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].quantity}"
										class="quantity form-control" autocomplete='off' /></td>
								</tr>
								<tr>

									<th>Measurement</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input type="text"
												th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].measurement.name}"
												class="measurement form-control" autocomplete="off" /> <input
												type="hidden"
												th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].measurement.id}"
												class="form-control" />
										</div>
									</td>
									<th>Price</th>
									<td><input type="text"
										th:field="*{purchaseOrderItems[__${purchaseOrderItemStat.index}__].rate}"
										class="rate form-control" autocomplete='off' /></td>
								</tr>
							</tbody>
							<tbody>
								<tr>
									<td colspan="4" style="text-align: right;"><label>Total
											Cost</label></td>
									<td><input type="text" th:field="*{totalCost}"
										readonly="readonly" class="totalCost form-control" /></td>
								</tr>
							</tbody>
						</table>
						<div class="form-group">
							<button type="submit" name="addPurchaseOrderItem"
								class="btn btn-info btn-xs">
								<i class="fa fa-plus fa-lg" aria-hidden="true"></i> Add Item
							</button>
						</div>
					</div>
				</div>
				<div th:if="${#fields.hasAnyErrors()}" class="alert alert-danger">
					<p th:text="${#fields.allErrors()[0]}">...</p>
				</div>
				<div class="form-group">
					<button type="submit" class="btn btn-primary" th:switch="${button}">
						<i th:case="Add" class="fa fa-plus fa-lg" aria-hidden="true"></i>
						<i th:case="Update" class="fa fa-floppy-o fa-lg"
							aria-hidden="true"></i> <span th:text="${button}"></span>
					</button>
					<a href="/purchaseOrder/">
						<button type="button" class="btn btn-danger" th:if='${update}'>
							<i class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
							Cancel
						</button>
					</a>
				</div>
			</div>
		</div>
	</div>
	<div th:fragment="goodsReceiveChallan(update,button)">
		<div class="row">
			<div class="col-lg-6">
				<input class="form-control" th:field="*{finYear}" type="hidden" />
				<input class="form-control" th:field="*{goodsReceiveChallanId}"
					type="hidden" />
				<div class="form-group">

					<label th:text="Vendor"></label>
					<!-- <button type="submit" name="removeTag" class="btn btn-danger btn-circle-sm btn-xs"><i class="fa fa-times fa-fw"></i>
                            </button> -->

					<div id="scrollable-dropdown-menu">
						<input class="vendor form-control" th:field="*{vendor.name}"
							type="text" autocomplete="off" /> <input class="form-control"
							th:field="*{vendor.id}" type="hidden" />
					</div>

				</div>
				<div class="form-group">
					<label>GRC Date</label> <input type="date"
						data-th-field="*{goodsReceiveChallanDate}" class="form-control" />
				</div>
				<div class="form-group">
					<label>Warehouse Location</label> <input type="text"
						th:field="*{warehouseLocation.name}"
						class="warehouse form-control" autocomplete="off" /> <input
						type="hidden" th:field="*{warehouseLocation.id}"
						class="form-control" />
				</div>

				<div class="form-group">
					<label>Gate No</label> <input type="text" th:field="*{gateNo}"
						class="form-control" />
				</div>
				<div class="form-group"
					th:switch="${goodsReceiveChallan.isSaveItemDetails()}">
					<button th:case="false" type="submit" name="addItemDetails"
						class="btn btn-info btn-xs">
						<i class="fa fa-plus-circle" aria-hidden="true"></i> Add Item
						details
					</button>
					<button th:case="true" type="submit" name="removeItemDetails"
						class="btn btn-info btn-xs">
						<i class="fa fa-minus-circle" aria-hidden="true"></i> Remove Item
						details
					</button>
					<input type="hidden" th:field="*{saveItemDetails}"
						class="form-control" />
				</div>
				<div th:if="${goodsReceiveChallan.isSaveItemDetails()} == true">
					<div class="form-group input-group">
						<span class="input-group-addon">Purchase Order No</span> <input
							class="form-control" th:field="*{purchaseOrder.purchaseOrderId}"
							type="text" autocomplete="off" placeholder="Purchase Order No" />
						<input class="form-control" th:field="*{purchaseOrder.finYear}"
							type="hidden" /> <span class="input-group-btn">
							<button class="btn btn-default" type="submit" name="poNo">
								<i class="fa fa-search"></i>
							</button>
						</span>
					</div>
					<div class="form-group">
						<label>Stock Point</label> <input type="text"
							th:field="*{stockPoint.name}" class="stockPoint form-control"
							autocomplete="off" /> <input type="hidden"
							th:field="*{stockPoint.id}" class="form-control" />
					</div>

					<div class="form-group">
						<label><input type="checkbox" th:field="*{verified}" />
							Verified</label>
					</div>
				</div>
			</div>
			<div class="col-lg-6">
				<div class="form-group">
					<label>LR No</label> <input type="text" th:field="*{lrNo}"
						class="form-control" />
				</div>
				<div class="form-group">
					<label>LR Date</label> <input type="date" data-th-field="*{lrDate}"
						class="form-control" />
				</div>
				<div class="form-group">
					<label th:text="Transporter"></label>
					<!-- <button type="submit" name="removeTag" class="btn btn-danger btn-circle-sm btn-xs"><i class="fa fa-times fa-fw"></i>
                            </button> -->
					<div id="scrollable-dropdown-menu">
						<input class="transporter form-control"
							th:field="*{transporter.name}" type="text" autocomplete="off" />
						<input class="form-control" th:field="*{transporter.id}"
							type="hidden" />
					</div>
				</div>
				<div class="form-group">
					<label>Frieght Amount</label> <input type="text"
						data-th-field="*{frieghtAmount}" class="form-control" />
				</div>
				<div class="form-group">
					<label>Total Bales Received</label> <input type="text"
						th:field="*{totalBalesReceived}" class="form-control" />
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<div class="panel panel-info"
					th:if="${goodsReceiveChallan.isSaveItemDetails()} == true">
					<div class="panel-heading">
						<label>Items</label>
					</div>
					<div class="panel-body">
						<table class="table table-striped table-bordered table-hover">
							<tbody
								th:each="var, goodsReceiveChallanItemStat : *{goodsReceiveChallanItems}">
								<tr>
									<th><button type="submit" name="removePurchaseOrderItem"
											class="btn btn-danger btn-xs"
											th:value="(*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].srNo!=0} ?*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].srNo}: ${goodsReceiveChallanItemStat.count} )">
											<i class="fa fa-times-circle fa-lg" aria-hidden="true"></i>

										</button> <input type="hidden"
										th:attr="name='goodsReceiveChallanItems[' + ${goodsReceiveChallanItemStat.index} + '].srNo'"
										class="form-control"
										th:value="(*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].srNo!=0} ?*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].srNo}: ${goodsReceiveChallanItemStat.count} )" />
										<input
										th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].finYear}"
										type="hidden" class="form-control" /> <input
										th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].goodsReceiveChallanId}"
										type="hidden" class="form-control" /></th>
									<th colspan="3"
										th:text="|Item ${goodsReceiveChallanItemStat.count}|"></th>
								</tr>
								<tr>
									<th>PO Date <input type="date"
										th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].poDate}"
										class="form-control" autocomplete="off" />
									</th>
									<th>Date<input type="date"
										th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].deliveryDate}"
										class="form-control" autocomplete="off" /></th>

									<th>Quantity</th>
									<td><input type="text"
										th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].quantity}"
										class="quantity form-control" autocomplete='off' /></td>
								</tr>
								<tr>

									<th>Measurement</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input type="text"
												th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].measurement.name}"
												class="measurement form-control" autocomplete="off" /> <input
												type="hidden"
												th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].measurement.id}"
												class="form-control" />
										</div>
									</td>
									<th>Price</th>
									<td><input type="text"
										th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].rate}"
										class="rate form-control" autocomplete='off' /></td>
								</tr>
								<tr th:if="${var.brand}">
									<th>Style</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input type="text"
												th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].style.name}"
												class="style form-control" autocomplete="off" /> <input
												type="hidden"
												th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].style.id}"
												class="form-control" />
										</div>
									</td>
									<th>Brand</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input type="text"
												th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].brand.name}"
												class="brand form-control" autocomplete="off" /> <input
												type="hidden"
												th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].brand.id}"
												class="form-control" />
										</div>
									</td>
								</tr>
								<tr th:if="!${var.brand}">
									<th>Design</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input type="text"
												th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].productItems[0].product.name}"
												class="product form-control" autocomplete="off" /> <input
												type="hidden"
												th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].productItems[0].product.id}"
												class="form-control" /> <input type="hidden"
												th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].productItems[0].quantity}"
												class="form-control"
												value="${goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].quantity" />
										</div>
									</td>
									<th>Variant</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input type="text"
												th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].productItems[0].variant.name}"
												class="product_variant form-control" autocomplete="off" />
											<input type="hidden"
												th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].productItems[0].variant.id}"
												class="form-control" />
										</div>
									</td>
								</tr>
								<tr th:if="${var.brand}">
									<td colspan="4">
										<button type="submit" name="addProduct"
											class="btn btn-info btn-xs"
											th:value="(*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].srNo!=0} ?*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].srNo}: ${goodsReceiveChallanItemStat.count} )">
											<i class="fa fa-plus-circle" aria-hidden="true"></i> Add
											Design
										</button>
									</td>
								</tr>
								<tr th:if="${var.brand}">
									<th colspan="4">
										<table class="table table-bordered "
											th:if="${var.productItems}">
											<tbody>
												<tr>
													<th></th>
													<th>Design</th>
													<th>Variant</th>
													<th>Quantity</th>
												</tr>
												<tr
													th:each="prd, productItemStat : *{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].productItems}">
													<td>
														<button th:if="${var.brand}" type="submit"
															name="removeProduct" class="btn btn-danger btn-xs"
															th:value="(*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].productItems[__${productItemStat.index}__].id!=0} ?*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].productItems[__${productItemStat.index}__].id}: ${productItemStat.count} )">
															<i class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
														</button> <input type="hidden"
														th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].productItems[__${productItemStat.index}__].id}"
														class="form-control" />
													</td>
													<td>
														<div id="scrollable-dropdown-menu">
															<input type="text"
																th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].productItems[__${productItemStat.index}__].product.name}"
																class="product form-control" autocomplete="off" /> <input
																type="hidden"
																th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].productItems[__${productItemStat.index}__].product.id}"
																class="form-control" />
														</div>
													</td>

													<td>
														<div id="scrollable-dropdown-menu">
															<input type="text"
																th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].productItems[__${productItemStat.index}__].variant.name}"
																class="product_variant form-control" autocomplete="off" />
															<input type="hidden"
																th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].productItems[__${productItemStat.index}__].variant.id}"
																class="form-control" />
														</div>
													</td>
													<td><input type="text"
														th:field="*{goodsReceiveChallanItems[__${goodsReceiveChallanItemStat.index}__].productItems[__${productItemStat.index}__].quantity}"
														class="tb-width-sm form-control" /></td>
												</tr>
											</tbody>
										</table>
									</th>
								</tr>
								<tr>
									<td colspan="4"><p></p></td>
								</tr>
							</tbody>
							<tbody>
								<tr>
									<td colspan="3" style="text-align: right;"><label>Total
											Cost</label></td>
									<td><input type="text" th:field="*{totalCost}"
										readonly="readonly" class="totalCost form-control" /></td>
								</tr>
							</tbody>
						</table>
						<div class="form-group">
							<button type="submit" name="addGoodsReceiveChallanItem"
								class="btn btn-info btn-xs">
								<i class="fa fa-plus fa-lg" aria-hidden="true"></i> Add Item
							</button>
						</div>
					</div>
				</div>
				<div th:if="${#fields.hasAnyErrors()}" class="alert alert-danger">
					<p th:text="${#fields.allErrors()[0]}">...</p>
				</div>
				<div class="form-group">
					<button type="submit" class="btn btn-primary" th:switch="${button}">
						<i th:case="Add" class="fa fa-plus fa-lg" aria-hidden="true"></i>
						<i th:case="Update" class="fa fa-floppy-o fa-lg"
							aria-hidden="true"></i> <span th:text="${button}"></span>
					</button>
					<a href="/goodsReceiveChallan/">
						<button type="button" class="btn btn-danger" th:if='${update}'>
							<i class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
							Cancel
						</button>
					</a>
				</div>
			</div>
		</div>
	</div>
	<div th:fragment="purchaseInvoice(update,button)">
		<div class="row">
			<div class="col-lg-6">
				<div class="form-group input-group">
					<input class="form-control" th:field="*{finYear}" type="hidden" />
					<input class="form-control" th:field="*{purchaseInvoiceId}"
						type="hidden" /> <span class="input-group-addon">GRC No</span> <input
						class="form-control"
						th:field="*{goodsReceiveChallan.goodsReceiveChallanId}"
						type="text" autocomplete="off" /> <input class="form-control"
						th:field="*{goodsReceiveChallan.finYear}" type="hidden" /> <span
						class="input-group-btn">
						<button class="btn btn-default" type="submit" name="poNo">
							<i class="fa fa-search"></i>
						</button>
					</span>
				</div>
				<div class="form-group">

					<label th:text="Vendor"></label>
					<!-- <button type="submit" name="removeTag" class="btn btn-danger btn-circle-sm btn-xs"><i class="fa fa-times fa-fw"></i>
                            </button> -->

					<div id="scrollable-dropdown-menu">
						<input class="vendor form-control" th:field="*{vendor.name}"
							type="text" autocomplete="off" /> <input class="form-control"
							th:field="*{vendor.id}" type="hidden" />
					</div>

				</div>
				<div class="form-group">
					<label>Vendor Firm</label>
					<div id="scrollable-dropdown-menu">
						<input class="vendorFirm form-control" th:field="*{vendorFirm}"
							type="text" autocomplete="off" />
					</div>

				</div>

				<div class="form-group">
					<label>Purchase Invoice Date</label> <input type="date"
						data-th-field="*{purchaseInvoiceDate}" class="form-control" />
				</div>
				<div class="form-group">
					<label>Supplier Invoice No</label> <input type="text"
						th:field="*{supplierInvoiceNo}" class="form-control" />
				</div>
				<div class="form-group">
					<label>Supplier Invoice Date</label> <input type="date"
						th:field="*{supplierInvoiceDate}" class="form-control" />
				</div>
				<div class="form-group">
					<label>Discount on Bill</label> <input type="text"
						th:field="*{totalDiscount}" class="totalDiscount form-control" />
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<div class="panel panel-info">
					<div class="panel-heading">
						<label>Items</label>
					</div>
					<div class="panel-body">
						<table class="table table-striped table-bordered table-hover">
							<tbody
								th:each="var, purchaseInvoiceItemStat : *{purchaseInvoiceItems}">
								<tr>
									<th th:text="|Item ${purchaseInvoiceItemStat.count}|"></th>
									<th><button type="submit" name="removePurchaseOrderItem"
											class="btn btn-danger btn-xs"
											th:value="(*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].srNo!=0} ?*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].srNo}: ${purchaseInvoiceItemStat.count} )">
											<i class="fa fa-times-circle fa-lg" aria-hidden="true"></i>

										</button> <input type="hidden"
										th:attr="name='purchaseInvoiceItems[' + ${purchaseInvoiceItemStat.index} + '].srNo'"
										class="form-control"
										th:value="(*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].srNo!=0} ?*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].srNo}: ${purchaseInvoiceItemStat.count} )" />
										<input
										th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].finYear}"
										type="hidden" class="form-control" /> <input
										th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].purchaseInvoiceId}"
										type="hidden" class="form-control" />
										<input
										th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].defective}"
										type="hidden" class="form-control" />
										</th>
									<td><label><input type="checkbox"
											th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].approved}" />Approved</label></td>
									<td>
										<button type="submit" name="defectProduct"
											class="btn btn-info btn-xs"
											th:value="(*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].srNo!=0} ?*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].srNo}: ${purchaseInvoiceItemStat.count} )">
											<i class="fa fa-plus-circle" aria-hidden="true"></i> Add
											Defective Item
										</button>
									</td>

								</tr>

								<tr>
									<th>Design</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input type="text"
												th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[0].product.name}"
												class="product form-control" autocomplete="off" /> <input
												type="hidden"
												th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[0].product.id}"
												class="form-control" /> <input type="hidden"
												th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[0].quantity}"
												class="form-control"
												value="${purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].quantity" />
										</div>
									</td>
									<th>Variant</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input type="text"
												th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[0].variant.name}"
												class="product_variant form-control" autocomplete="off" />
											<input type="hidden"
												th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[0].variant.id}"
												class="form-control" />
										</div>
									</td>
								</tr>

								<tr>
									<th>Quantity</th>
									<td><input type="text"
										th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].quantity}"
										class="quantity form-control" autocomplete='off' /></td>
									<th>Measurement</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input type="text"
												th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].measurement.name}"
												class="measurement form-control" autocomplete="off" /> <input
												type="hidden"
												th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].measurement.id}"
												class="form-control" />
										</div>
									</td>

								</tr>
								<tr>
									<th>Price</th>
									<td><input type="text"
										th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].rate}"
										class="rate form-control" autocomplete='off' /></td>
									<th>Discount</th>
									<td><input type="text"
										th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].discount}"
										class="discount form-control" /></td>
								</tr>
								<tr th:if="${var.isDefective()} == true">
									<th colspan="4">
										<table class="table table-bordered "
											th:if="${var.productItems}">
											<tbody>
												<tr>
													<th></th>
													<th>Variant Type</th>
													<th>Variant Name</th>
													<th>Quantity</th>
													<th>Price</th>
												</tr>
												<tr
													th:each="prd, productItemStat : *{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems}" th:if="${prd.variant} and ${prd.variant.isDefective()} == true">
													<td>
														<input type="hidden"
										th:attr="name='purchaseInvoiceItems[' + ${purchaseInvoiceItemStat.index} + '].productItems['+ ${productItemStat.index}+'].srNo'"
										class="form-control"
										th:value="(*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].srNo!=0 and purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].srNo!=''} ?*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].srNo}: ${productItemStat.count} )" />
														
														<button  type="submit"
															name="removeDefectProduct" class="btn btn-danger btn-xs"
															th:value="(*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].srNo!=0} ?*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].srNo}: ${productItemStat.count} )">
															<i class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
														</button>
												<input type="hidden"
														th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].id}"
														class="form-control" />														
														
														<input type="hidden"
														th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].product.id}"
														class="form-control" />														
												
														<input type="hidden"
														th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].variant.defective}"
														class="form-control" />
														<input type="hidden"
														th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].variant.id}"
														class="form-control" />
													</td>
													<td><input class="variantType_pi form-control"
														type="text" autocomplete="off" th:id="|${purchaseInvoiceItemStat.count-1}_${productItemStat.count-1}|" />
														<div class="variantlist_pi" th:include="fragments::variants_pi" th:id="|pilist${purchaseInvoiceItemStat.count-1}_${productItemStat.count-1}|"></div>

													</td>
													<td><input type="text"
														th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].variant.name}"
														class="form-control" />	
													</td>
													<td><input type="text"
														th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].variant.quantity}"
														class="tb-width-sm form-control" /></td>
														<td><input type="text"
														th:field="*{purchaseInvoiceItems[__${purchaseInvoiceItemStat.index}__].productItems[__${productItemStat.index}__].variant.cost}"
														class="tb-width-sm form-control" /></td>
												</tr>
											</tbody>
										</table>
									</th>
								</tr>
								<tr>
									<td colspan="4"><p></p></td>
								</tr>
							</tbody>
							<tbody>
								<tr>
									<td colspan="3" style="text-align: right;"><label>Total
											Cost</label></td>
									<td><input type="text" th:field="*{totalCost}"
										readonly="readonly" class="totalCost form-control" /></td>
								</tr>
							</tbody>
						</table>
						<div class="form-group">
							<button type="submit" name="addPurchaseInvoiceItem"
								class="btn btn-info btn-xs">
								<i class="fa fa-plus fa-lg" aria-hidden="true"></i> Add Item
							</button>
						</div>
					</div>
				</div>
				<div th:if="${#fields.hasAnyErrors()}" class="alert alert-danger">
					<p th:text="${#fields.allErrors()[0]}">...</p>
				</div>
				<div class="form-group">
					<button type="submit" class="btn btn-primary" th:switch="${button}">
						<i th:case="Add" class="fa fa-plus fa-lg" aria-hidden="true"></i>
						<i th:case="Update" class="fa fa-floppy-o fa-lg"
							aria-hidden="true"></i> <span th:text="${button}"></span>
					</button>
					<a href="/purchaseInvoice/">
						<button type="button" class="btn btn-danger" th:if='${update}'>
							<i class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
							Cancel
						</button>
					</a>
				</div>
			</div>
		</div>
	</div>

	<div th:fragment="vendor(update,button)">
		<div class="row">
			<div class="col-lg-6">
				<div class="form-group">
					<label>Company Name</label> <input type="text" th:field="*{name}"
						class="form-control" /><input type="hidden" th:field="*{id}"
						class="form-control" />
				</div>
				<div class="form-group">
					<label>Phone</label> <input type="text" th:field="*{phone}"
						class="form-control" />
				</div>
				<div class="form-group">
					<label>Email</label> <input type="email" th:field="*{email}"
						class="form-control" />
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<div class="panel panel-info">
					<div class="panel-heading">
						<label>Contact Persons</label>
					</div>
					<div class="panel-body">
						<table class="table table-striped table-bordered table-hover">
							<tbody th:each="var, contactPersonStat : *{contactPersons}">
								<tr>
									<th colspan="4"
										th:text="|Contact Person ${contactPersonStat.count}|"></th>
								</tr>
								<tr>
									<th>Name</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input
												th:field="*{contactPersons[__${contactPersonStat.index}__].name}"
												type="text"
												class="contactPersonType typeahead tt-query form-control"
												autocomplete="off" /> <input
												th:field="*{contactPersons[__${contactPersonStat.index}__].id}"
												type="hidden" class="form-control" />
										</div>
									</td>
									<th>Designation</th>
									<td><input type="text"
										th:field="*{contactPersons[__${contactPersonStat.index}__].designation}"
										class="form-control" /></td>
								</tr>
								<tr>
									<th>Mobile</th>
									<td><input type="text"
										th:field="*{contactPersons[__${contactPersonStat.index}__].mobile}"
										class="form-control" /></td>
									<th>Alternate Mobile</th>
									<td><input type="text"
										th:field="*{contactPersons[__${contactPersonStat.index}__].alternateMobile}"
										class="form-control" /></td>
								</tr>
								<tr>
									<th>Email</th>
									<td><input type="email"
										th:field="*{contactPersons[__${contactPersonStat.index}__].email}"
										class="form-control" /></td>
									<th>Alternate Email</th>
									<td><input type="email"
										th:field="*{contactPersons[__${contactPersonStat.index}__].alternateEmail}"
										class="form-control" /></td>
								</tr>
							</tbody>
						</table>
						<div class="form-group">
							<button type="submit" name="addContactPerson"
								class="btn btn-info btn-xs">
								<i class="fa fa-plus fa-lg" aria-hidden="true"></i> Add Contact
								Person
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<div class="panel panel-info">
					<div class="panel-heading">
						<label>Addresses</label>
					</div>
					<div class="panel-body">

						<table class="table table-striped table-bordered table-hover">
							<tbody th:each="var, addressStat : *{addressList}">
								<tr>
									<th colspan="4" th:text="|Address ${addressStat.count}|"></th>
								</tr>
								<tr>
									<th>Firm Name</th>
									<td colspan="3"><input
										th:field="*{addressList[__${addressStat.index}__].firm}"
										class="form-control" type="text" /></td>
								</tr>
								<tr>
									<th>TIN No</th>
									<td><input
										th:field="*{addressList[__${addressStat.index}__].tinNo}"
										class="form-control" type="text" /></td>
									<th>CST No</th>
									<td><input type="text"
										th:field="*{addressList[__${addressStat.index}__].cstNo}"
										class="form-control" /></td>
								</tr>
								<tr>
									<th>Address</th>
									<td><input
										th:field="*{addressList[__${addressStat.index}__].addressLine}"
										class="form-control" type="text" /> <input
										th:field="*{addressList[__${addressStat.index}__].id}"
										type="hidden" class="form-control" /></td>
									<th>City</th>
									<td><input type="text"
										th:field="*{addressList[__${addressStat.index}__].city}"
										class="form-control" /></td>
								</tr>
								<tr>
									<th>District</th>
									<td><input type="text"
										th:field="*{addressList[__${addressStat.index}__].district}"
										class="form-control" /></td>
									<th>Pincode</th>
									<td><input type="text"
										th:field="*{addressList[__${addressStat.index}__].pincode}"
										class="form-control" /></td>
								</tr>
								<tr>
									<th>State</th>
									<td><input type="text"
										th:field="*{addressList[__${addressStat.index}__].state}"
										class="form-control" /></td>
									<th>Country</th>
									<td><input type="text"
										th:field="*{addressList[__${addressStat.index}__].country}"
										class="form-control" /></td>
								</tr>
							</tbody>
						</table>
						<div class="form-group">
							<button type="submit" name="addAddresses"
								class="btn btn-info btn-xs">
								<i class="fa fa-plus fa-lg" aria-hidden="true"></i> Add Address
							</button>
						</div>

					</div>
				</div>
				<div th:if="${#fields.hasAnyErrors()}" class="alert alert-danger">
					<p th:text="${#fields.allErrors()[0]}">...</p>
				</div>
				<div class="form-group">
					<button type="submit" class="btn btn-primary" th:switch="${button}">
						<i th:case="Add" class="fa fa-plus fa-lg" aria-hidden="true"></i>
						<i th:case="Update" class="fa fa-floppy-o fa-lg"
							aria-hidden="true"></i> <span th:text="${button}"></span>
					</button>
					<a href="/vendor/">
						<button type="button" class="btn btn-danger" th:if='${update}'>
							<i class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
							Cancel
						</button>
					</a>
				</div>
			</div>
		</div>
	</div>
	<div th:fragment="transporter(update,button)">
		<div class="row">
			<div class="col-lg-6">
				<div class="form-group">
					<label>Company Name</label> <input type="text" th:field="*{name}"
						class="form-control" /><input type="hidden" th:field="*{id}"
						class="form-control" />
				</div>
				<div class="form-group">
					<label>Phone</label> <input type="text" th:field="*{phone}"
						class="form-control" />
				</div>
				<div class="form-group">
					<label>Email</label> <input type="email" th:field="*{email}"
						class="form-control" />
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<div class="panel panel-info">
					<div class="panel-heading">
						<label>Contact Persons</label>
					</div>
					<div class="panel-body">
						<table class="table table-striped table-bordered table-hover">
							<tbody th:each="var, contactPersonStat : *{contactPersons}">
								<tr>
									<th colspan="4"
										th:text="|Contact Person ${contactPersonStat.count}|"></th>
								</tr>
								<tr>
									<th>Name</th>
									<td>
										<div id="scrollable-dropdown-menu">
											<input
												th:field="*{contactPersons[__${contactPersonStat.index}__].name}"
												type="text"
												class="contactPersonType typeahead tt-query form-control"
												autocomplete="off" /> <input
												th:field="*{contactPersons[__${contactPersonStat.index}__].id}"
												type="hidden" class="form-control" />
										</div>
									</td>
									<th>Designation</th>
									<td><input type="text"
										th:field="*{contactPersons[__${contactPersonStat.index}__].designation}"
										class="form-control" /></td>
								</tr>
								<tr>
									<th>Mobile</th>
									<td><input type="text"
										th:field="*{contactPersons[__${contactPersonStat.index}__].mobile}"
										class="form-control" /></td>
									<th>Alternate Mobile</th>
									<td><input type="text"
										th:field="*{contactPersons[__${contactPersonStat.index}__].alternateMobile}"
										class="form-control" /></td>
								</tr>
								<tr>
									<th>Email</th>
									<td><input type="email"
										th:field="*{contactPersons[__${contactPersonStat.index}__].email}"
										class="form-control" /></td>
									<th>Alternate Email</th>
									<td><input type="email"
										th:field="*{contactPersons[__${contactPersonStat.index}__].alternateEmail}"
										class="form-control" /></td>
								</tr>
							</tbody>
						</table>
						<div class="form-group">
							<button type="submit" name="addContactPerson"
								class="btn btn-info btn-xs">
								<i class="fa fa-plus fa-lg" aria-hidden="true"></i> Add Contact
								Person
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<div class="panel panel-info">
					<div class="panel-heading">
						<label>Addresses</label>
					</div>
					<div class="panel-body">

						<table class="table table-striped table-bordered table-hover">
							<tbody th:each="var, addressStat : *{addressList}">
								<tr>
									<th colspan="4" th:text="|Address ${addressStat.count}|"></th>
								</tr>
								<tr>
									<th>TIN No</th>
									<td><input
										th:field="*{addressList[__${addressStat.index}__].tinNo}"
										class="form-control" type="text" /></td>
									<th>CST No</th>
									<td><input type="text"
										th:field="*{addressList[__${addressStat.index}__].cstNo}"
										class="form-control" /></td>
								</tr>
								<tr>
									<th>Address</th>
									<td><input
										th:field="*{addressList[__${addressStat.index}__].addressLine}"
										class="form-control" type="text" /> <input
										th:field="*{addressList[__${addressStat.index}__].id}"
										type="hidden" class="form-control" /></td>
									<th>City</th>
									<td><input type="text"
										th:field="*{addressList[__${addressStat.index}__].city}"
										class="form-control" /></td>
								</tr>
								<tr>
									<th>District</th>
									<td><input type="text"
										th:field="*{addressList[__${addressStat.index}__].district}"
										class="form-control" /></td>
									<th>Pincode</th>
									<td><input type="text"
										th:field="*{addressList[__${addressStat.index}__].pincode}"
										class="form-control" /></td>
								</tr>
								<tr>
									<th>State</th>
									<td><input type="text"
										th:field="*{addressList[__${addressStat.index}__].state}"
										class="form-control" /></td>
									<th>Country</th>
									<td><input type="text"
										th:field="*{addressList[__${addressStat.index}__].country}"
										class="form-control" /></td>
								</tr>
							</tbody>
						</table>
						<div class="form-group">
							<button type="submit" name="addAddresses"
								class="btn btn-info btn-xs">
								<i class="fa fa-plus fa-lg" aria-hidden="true"></i> Add Address
							</button>
						</div>

					</div>
				</div>
				<div th:if="${#fields.hasAnyErrors()}" class="alert alert-danger">
					<p th:text="${#fields.allErrors()[0]}">...</p>
				</div>
				<div class="form-group">
					<button type="submit" class="btn btn-primary" th:switch="${button}">
						<i th:case="Add" class="fa fa-plus fa-lg" aria-hidden="true"></i>
						<i th:case="Update" class="fa fa-floppy-o fa-lg"
							aria-hidden="true"></i> <span th:text="${button}"></span>
					</button>
					<a href="/transporter/">
						<button type="button" class="btn btn-danger" th:if='${update}'>
							<i class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
							Cancel
						</button>
					</a>
				</div>
			</div>
		</div>
	</div>


	<div th:fragment="route(update,button)">
		<div class="row">
			<div class="col-lg-6">
				<div class="form-group">
					<label>Route Name *</label> <input type="text" th:field="*{name}"
						class="form-control" /><input type="hidden" th:field="*{id}"
						class="form-control" />
				</div>
				<div class="form-group">
					<label>Description</label>
					<textarea class="form-control" rows="3" th:field="*{description}"></textarea>
				</div>
				<div class="form-group" th:each="var, stageStat : *{stages}">
					<label th:text="|Stage ${stageStat.count} *|"></label>
					<!-- <button type="submit" name="removeTag" class="btn btn-danger btn-circle-sm btn-xs"><i class="fa fa-times fa-fw"></i>
                            </button> -->
					<div id="scrollable-dropdown-menu">
						<input class="stageType form-control"
							th:field="*{stages[__${stageStat.index}__].type.name}"
							type="text" autocomplete="off" /> <input class="form-control"
							th:field="*{stages[__${stageStat.index}__].type.id}"
							type="hidden" />
					</div>
				</div>
				<div class="form-group">
					<button type="submit" name="addStage" class="btn btn-info btn-xs">
						<i class="fa fa-plus fa-lg" aria-hidden="true"></i> Add Stage
					</button>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<div th:if="${#fields.hasAnyErrors()}" class="alert alert-danger">
					<p th:text="${#fields.allErrors()[0]}">...</p>
				</div>
				<div class="form-group">
					<button type="submit" class="btn btn-primary" th:switch="${button}">
						<i th:case="Add" class="fa fa-plus fa-lg" aria-hidden="true"></i>
						<i th:case="Update" class="fa fa-floppy-o fa-lg"
							aria-hidden="true"></i> <span th:text="${button}"></span>
					</button>
					<a href="/route/">
						<button type="button" class="btn btn-danger" th:if='${update}'>
							<i class="fa fa-times-circle fa-lg" aria-hidden="true"></i>
							Cancel
						</button>
					</a>
				</div>
			</div>
		</div>
	</div>
	<div th:fragment="stageType">
		<form action="#" th:action="@{/stageType/add}"
			th:object="${stageType}" method="post">
			<div class="form-group">
				<label>Stage Type *</label> <input type="text" th:field="*{name}"
					class="form-control" /><input type="hidden" th:field="*{id}"
					class="form-control" />
			</div>
			<div class="form-group">
				<label>Description</label>
				<textarea class="form-control" rows="3" th:field="*{description}"></textarea>
			</div>
			<div th:if="${#fields.hasAnyErrors()}" class="alert alert-danger">
				<p th:text="${#fields.allErrors()[0]}">...</p>
			</div>
			<div class="form-group">
				<button type="submit" class="btn btn-primary">
					<i class="fa fa-plus fa-lg" aria-hidden="true"></i> Add
				</button>
			</div>
		</form>
	</div>
</body>
</html>